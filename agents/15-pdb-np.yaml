apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: strand-web-pdb
  namespace: agents
spec:
  minAvailable: 1
  selector:
    matchLabels: {app: strand-web}
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: strand-web-egress
  namespace: agents
spec:
  podSelector:
    matchLabels: {app: strand-web}
  policyTypes: ["Egress"]
  egress:
    - to: # allow kube-dns
      - namespaceSelector: {matchLabels: {kubernetes.io/metadata.name: kube-system}}
      ports: [{port: 53, protocol: UDP}]
    - to: # allow AWS endpoints (example: 443 to anywhereâ€”tighten with VPC endpoints/cidr)
      - ipBlock: {cidr: 0.0.0.0/0}
      ports: [{port: 443, protocol: TCP}]